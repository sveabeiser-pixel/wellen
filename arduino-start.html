<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Arduino Lernbaustein – Seiten 1–5</title>
  <style>
    :root{
      --bg:#0b1220;
      --panel:#0f1b33;
      --card:#0f203f;
      --text:#e8eefc;
      --muted:#b8c6e6;
      --accent:#35d0c2;
      --accent2:#7aa8ff;
      --warn:#ffd166;
      --ok:#6ee7b7;
      --border:rgba(255,255,255,.12);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius:18px;
      --radius2:14px;
      --max:1100px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 700px at 20% 0%, rgba(53,208,194,.14), transparent 55%),
                  radial-gradient(900px 600px at 90% 10%, rgba(122,168,255,.14), transparent 50%),
                  var(--bg);
      color:var(--text);
      line-height:1.45;
    }
    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}
    header{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(10px);
      background: linear-gradient(to bottom, rgba(11,18,32,.85), rgba(11,18,32,.55));
      border-bottom: 1px solid var(--border);
    }
    .topbar{
      max-width: var(--max);
      margin: 0 auto;
      padding: 14px 16px;
      display:flex; gap:12px; align-items:center; justify-content:space-between;
    }
    .brand{
      display:flex; gap:10px; align-items:center;
      font-weight:700;
      letter-spacing:.2px;
    }
    .badge{
      font-size:12px;
      padding:4px 10px;
      border:1px solid var(--border);
      border-radius:999px;
      color:var(--muted);
      background:rgba(255,255,255,.03);
    }
    .layout{
      max-width: var(--max);
      margin: 0 auto;
      padding: 18px 16px 56px;
      display:grid;
      grid-template-columns: 290px 1fr;
      gap: 16px;
    }
    @media (max-width: 980px){
      .layout{grid-template-columns:1fr}
      nav{position:relative}
    }
    nav{
      position:sticky;
      top:74px;
      align-self:start;
      background: rgba(255,255,255,.03);
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .navhead{
      padding:14px 14px 10px;
      border-bottom:1px solid var(--border);
      background: linear-gradient(135deg, rgba(53,208,194,.12), rgba(122,168,255,.10));
    }
    .navhead h2{margin:0 0 6px; font-size:14px; color:var(--muted); font-weight:700}
    .progress{
      height:10px;
      background: rgba(255,255,255,.06);
      border:1px solid var(--border);
      border-radius:999px;
      overflow:hidden;
    }
    .bar{height:100%; width:0%; background: linear-gradient(90deg, var(--accent), var(--accent2))}
    .navlist{padding:10px}
    .navlist a{
      display:flex; align-items:center; gap:10px;
      padding:10px 10px;
      border-radius:12px;
      color:var(--text);
      border:1px solid transparent;
    }
    .navlist a:hover{background:rgba(255,255,255,.04); border-color: var(--border); text-decoration:none}
    .dot{
      width:10px; height:10px; border-radius:999px;
      background:rgba(255,255,255,.15);
      border:1px solid var(--border);
    }
    .done .dot{background: var(--ok); border-color: rgba(110,231,183,.4)}
    main{
      display:flex;
      flex-direction:column;
      gap: 14px;
    }
    .card{
      background: rgba(255,255,255,.03);
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card > .inner{padding: 18px}
    .hero{
      background: linear-gradient(135deg, rgba(53,208,194,.18), rgba(122,168,255,.14));
    }
    .hero h1{margin:0 0 8px; font-size:28px}
    .hero p{margin:0; color:var(--muted)}
    h3{margin:0 0 10px; font-size:18px}
    .grid2{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    @media (max-width: 800px){ .grid2{grid-template-columns:1fr} }

    .callout{
      border:1px solid var(--border);
      border-radius: var(--radius2);
      background: rgba(255,255,255,.03);
      padding:12px 12px;
    }
    .callout strong{display:block; margin-bottom:6px}
    .callout.warn{border-color: rgba(255,209,102,.35); background: rgba(255,209,102,.07)}
    .callout.tip{border-color: rgba(53,208,194,.35); background: rgba(53,208,194,.06)}
    .callout.info{border-color: rgba(122,168,255,.35); background: rgba(122,168,255,.06)}

    .task{
      border:1px solid var(--border);
      border-radius: var(--radius2);
      background: rgba(255,255,255,.02);
      padding: 12px;
    }
    .task header{
      position:static;
      background:none;
      border:none;
      backdrop-filter:none;
    }
    .tasktitle{
      display:flex; justify-content:space-between; gap:10px; align-items:flex-start;
      margin-bottom:8px;
    }
    .pill{
      font-size:12px;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      color:var(--muted);
      background: rgba(255,255,255,.03);
      white-space:nowrap;
    }
    textarea{
      width:100%;
      min-height: 110px;
      resize: vertical;
      padding:10px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(15,32,63,.55);
      color: var(--text);
      outline:none;
    }
    textarea:focus{border-color: rgba(53,208,194,.65); box-shadow: 0 0 0 3px rgba(53,208,194,.15)}
    .btnrow{display:flex; flex-wrap:wrap; gap:10px; margin-top:10px}
    button{
      cursor:pointer;
      padding:10px 12px;
      border-radius: 12px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      color: var(--text);
      font-weight:600;
    }
    button.primary{
      background: linear-gradient(90deg, rgba(53,208,194,.22), rgba(122,168,255,.18));
      border-color: rgba(122,168,255,.35);
    }
    button:hover{filter: brightness(1.08)}
    .small{font-size:12px; color:var(--muted)}
    .sep{height:1px; background:var(--border); margin:12px 0}
    .kvs{display:grid; grid-template-columns: 1fr; gap:10px}
    .kv{
      border:1px dashed rgba(255,255,255,.18);
      border-radius: 14px;
      padding:10px 12px;
      background: rgba(255,255,255,.02);
    }
    .kv b{color: var(--accent)}
    .footer{
      color:var(--muted);
      font-size:12px;
      padding:12px 18px 18px;
      border-top:1px solid var(--border);
      background: rgba(0,0,0,.12);
    }
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      padding: 2px 6px;
      border:1px solid var(--border);
      border-bottom-width:2px;
      border-radius:8px;
      background: rgba(255,255,255,.04);
      color: var(--text);
    }
    .pdfview {
  display: grid;
  grid-template-columns: 1.1fr 0.9fr;
  gap: 14px;
}
@media (max-width: 900px) {
  .pdfview {
    grid-template-columns: 1fr;
  }
}
.pdfpage {
  border: 1px solid var(--border);
  border-radius: 14px;
  overflow: hidden;
  background: rgba(0,0,0,.2);
}
.pdfpage img {
  width: 100%;
  display: block;
}
.pdfcaption {
  font-size: 12px;
  color: var(--muted);
  padding: 6px 10px;
  border-top: 1px solid var(--border);
}
  </style>
</head>

<body>
<header>
  <div class="topbar">
    <div class="brand">
      <span style="width:14px;height:14px;border-radius:4px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:inline-block"></span>
      <span>Arduino – Lernbaustein (Seiten 1–5)</span>
      <span class="badge">GitHub Pages • interaktiv</span>
    </div>
    <div class="badge" id="saveState">Lokale Speicherung: aktiv</div>
  </div>
</header>

<div class="layout">
  <nav aria-label="Navigation">
    <div class="navhead">
      <h2>Dein Lernpfad</h2>
      <div class="progress" title="Fortschritt (lokal auf diesem Gerät)">
        <div class="bar" id="bar"></div>
      </div>
      <div class="small" style="margin-top:8px">
        Tipp: Markiere erledigt, wenn du eine Aufgabe abgeschlossen hast.
      </div>
    </div>
    <div class="navlist" id="navlist">
      <a href="#s1" data-sec="s1"><span class="dot"></span>1. Titel & Überblick</a>
      <a href="#s2" data-sec="s2"><span class="dot"></span>2. Inhaltsverzeichnis</a>
      <a href="#s3" data-sec="s3"><span class="dot"></span>3. Was ist ein Mikrocontroller?</a>
      <a href="#s4" data-sec="s4"><span class="dot"></span>4. Es leuchtet!</a>
      <a href="#s5" data-sec="s5"><span class="dot"></span>5. Aufgaben 2.1–2.3</a>
      <a href="#abgabe" data-sec="abgabe"><span class="dot"></span>Abgabe & Checkliste</a>

    </div>
  </nav>

  <main>
    <!-- SECTION 1 -->
    <section class="card hero" id="s1">
      <div class="inner">
        <h1>Einführung in den Mikrocontroller Arduino</h1>
        <p>
          Dieser Lernbaustein führt dich schrittweise an den Arduino heran – als „Steuerzentrale“ für kleine technische Projekte.
        </p>
        <div class="sep"></div>
      
        <div class="grid2">
          <div class="callout tip">
            <strong>So arbeitest du hier</strong>
            <ul style="margin:0; padding-left:18px; color:var(--muted)">
              <li>Lies kurz, dann mach die Aufgaben direkt auf der Seite.</li>
              <li>Deine Texte werden <b>lokal im Browser</b> gespeichert (nicht an die Lehrkraft gesendet).</li>
              <li>Wenn du abgeben sollst: nutze „Text kopieren“ und füge ihn ins Abgabe-Tool (OneNote) ein.</li>
            </ul>
          </div>
          <div class="callout warn">
            <strong>Wichtig (Technik & Sicherheit)</strong>
            <div style="color:var(--muted)">
              GitHub Pages ist statisch: Es gibt keine automatische Ergebnisabgabe.
              <br/>Elektrisch: Baue Schaltungen nur wie gezeigt auf und vermeide Kurzschlüsse.
            </div>
          </div>
        </div>
      </div>
      <div class="footer">
        Quelle der Inhalte: Lernbaustein-PDF, Seiten 1–5.
      </div>
    </section>

    <!-- SECTION 2 -->
    <section class="card" id="s2">
      <div class="inner">
        <h3>Inhaltsverzeichnis (Überblick)</h3>
        <div class="callout info">
          <strong>Was kommt später?</strong>
          <div style="color:var(--muted)">
            Es folgen u. a. Programmieren, Blinken, Töne/Unterprogramme, Variablen, serielle Ausgabe, Schleifen, LEDs dimmen, If/While und mehr.
          </div>
        </div>

        <div class="sep"></div>

        <div class="kvs">
          <div class="kv"><b>1</b> Was ist ein Mikrocontroller?</div>
          <div class="kv"><b>2</b> Es leuchtet!</div>
          <div class="kv"><b>3</b> Programm zum Programmieren</div>
          <div class="kv"><b>4</b> Das erste Blinken</div>
          <div class="kv"><b>5</b> Töne, Unterprogramme, Transistor</div>
          <div class="kv"><b>…</b> (weitere Kapitel im Original) 
        </div>

        <div class="sep"></div>

        <div class="task">
          <div class="tasktitle">
            <div><b>Mini-Check-in:</b> Was erwartest du vom Arduino?</div>
            <span class="pill">Text wird gespeichert</span>
          </div>
          <textarea id="t_expect" placeholder="Schreibe 2–4 Sätze: Was willst du mit dem Arduino lernen oder bauen?"></textarea>
          <div class="btnrow">
            <button class="primary" data-done="s2">Als erledigt markieren</button>
            <button data-copy="t_expect">Text kopieren</button>
            <button data-clear="t_expect">Feld leeren</button>
          </div>
          <div class="small">Hinweis: Speicherung erfolgt im Browser (localStorage). Auf einem anderen Gerät ist der Text nicht automatisch da.</div>
        </div>
      </div>
    </section>

    <!-- SECTION 3 -->
    <section class="card" id="s3">
      <div class="inner">
        <h3>1. Was ist ein Mikrocontroller?</h3>
        
         <div class="pdfpage">
      <img src="pdf-bilder/seite02.png" alt="PDF Seite 2">
      <div class="pdfcaption">Original – Seite 3</div>
    </div>
        
        <div class="grid2">
          <div class="callout">
            <strong>Kernaussage</strong>
            <div style="color:var(--muted)">
              Mikrocontroller sind kleine elektronische Bauteile, die in vielen Geräten als „Steuerzentrale“ arbeiten – z. B. in Waschmaschinen, Airbags, automatischen Türen oder in deinem Projekt.
            </div>
          </div>
          <div class="callout">
            <strong>Arduino</strong>
            <div style="color:var(--muted)">
              Der Arduino ist eine Mikrocontroller-Platine mit Anschlüssen (Pins), über die man Bauteile verbinden und Programme übertragen kann (z. B. per USB). 
            </div>
          </div>
        </div>

         <div class="pdfpage">
      <img src="pdf-bilder/seite03.png" alt="PDF Seite 3">
      <div class="pdfcaption">Original – Seite 3</div>
    </div>
        
        <div class="sep"></div>

        <div class="callout info">
          <strong>Begriffe </strong>
          <ul style="margin:0; padding-left:18px; color:var(--muted)">
            <li><b>HIGH / LOW</b>: zwei Zustände an Pins (vereinfacht: an/aus bzw. Spannung da/nicht da). </li>
            <li><b>USB-Anschluss</b>: darüber kann man Programme auf den Arduino übertragen. </li>
            <li><b>Reset</b>: startet den Mikrocontroller neu.</li>
          </ul>
        </div>

        <div class="sep"></div>

        <div class="task">
          <div class="tasktitle">
            <div><b>Aufgabe 1:</b> Mikrocontroller im Alltag</div>
            <span class="pill">Text wird gespeichert</span>
          </div>
          <div style="color:var(--muted); margin-bottom:8px">
            Nenne <b>mindestens 3 Geräte</b> aus deinem Alltag, in denen wahrscheinlich ein Mikrocontroller steckt.
            Erkläre bei einem Gerät kurz, <b>was</b> dort gesteuert wird.
          </div>
          <textarea id="t_mc" placeholder="Beispiele: Gerät 1 … Gerät 2 … Gerät 3 … + kurze Erklärung"></textarea>
          <div class="btnrow">
            <button class="primary" data-done="s3">Als erledigt markieren</button>
            <button data-copy="t_mc">Text kopieren</button>
            <button data-clear="t_mc">Feld leeren</button>
          </div>
        </div>
      </div>
    </section>

    <!-- SECTION 4 -->
    <section class="card" id="s4">
      <div class="inner">
        <h3>2. Es leuchtet!</h3>
 <div class="pdfpage">
      <img src="pdf-bilder/seite04.png" alt="PDF Seite 4">
      <div class="pdfcaption">Original – Seite 4</div>
 </div>
        
        <div class="grid2">
          <div class="callout">
            <strong>LED (Leuchtdiode)</strong>
            <div style="color:var(--muted)">
              Eine LED ist eine Diode, die leuchtet – Strom fließt dabei nur in eine Richtung (Anode/Kathode). 
            </div>
          </div>
          <div class="callout">
            <strong>Widerstand</strong>
            <div style="color:var(--muted)">
              Ein Widerstand begrenzt den Strom. Ohne „Schutzwiderstand“ kann eine LED sehr schnell kaputtgehen. 
            </div>
          </div>
        </div>

        <div class="sep"></div>

        <div class="callout warn">
          <strong>Ganz wichtig</strong>
          <div style="color:var(--muted)">
            Verwende beim Aufbau am Breadboard passende Kabel (Jumper-Wires) und achte darauf, keine falschen Verbindungen zu stecken. 
          </div>
        </div>

        <div class="sep"></div>

        <div class="task">
          <div class="tasktitle">
            <div><b>Aufgabe 2:</b> Warum braucht die LED einen Widerstand?</div>
            <span class="pill">Text wird gespeichert</span>
          </div>
          <textarea id="t_led" placeholder="Erkläre in 3–5 Sätzen: Was passiert ohne Widerstand und warum?"></textarea>
          <div class="btnrow">
            <button class="primary" data-done="s4">Als erledigt markieren</button>
            <button data-copy="t_led">Text kopieren</button>
            <button data-clear="t_led">Feld leeren</button>
          </div>
        </div>
      </div>
    </section>

    <!-- SECTION 5 -->
    <section class="card" id="s5">
      <div class="inner">
        <h3>Aufgaben 2.1–2.3 </h3>

         <div class="pdfpage">
      <img src="pdf-bilder/seite05.png" alt="PDF Seite 5">
      <div class="pdfcaption">Original – Seite 5</div>
    </div>
        
        <div class="callout info">
          <strong>Aufbau-Idee</strong>
          <div style="color:var(--muted)">
            Auf Seite 5 wird eine LED-Schaltung (u. a. mit 220&nbsp;Ω Widerstand) sowie Reihenschaltung/Parallelschaltung erläutert. 
          </div>
        </div>

        <div class="sep"></div>

        <div class="task">
          <div class="tasktitle">
            <div><b>2.1</b> LED + 220&nbsp;Ω (Farben laut Bild)</div>
            <span class="pill">Dokumentation</span>
          </div>
          <div style="color:var(--muted); margin-bottom:8px">
            Baue eine Schaltung aus einer LED, einem 220&nbsp;Ω-Widerstand und einem Jumper-Wire wie im Bild beschrieben. Notiere:
            <ul style="margin:6px 0 0; padding-left:18px">
              <li>Wie hast du erkannt, welches LED-Beinchen an den Pluspol gehört?</li>
              <li>Spielt es eine Rolle, ob der Widerstand vor oder hinter der LED ist (solange es eine Reihenschaltung ist)?</li>
            </ul>
           
          </div>
          <textarea id="t_21" placeholder="Notizen zu 2.1 (Aufbau + Beobachtungen)"></textarea>
          <div class="btnrow">
            <button class="primary" data-done="s5">Als erledigt markieren</button>
            <button data-copy="t_21">Text kopieren</button>
            <button data-clear="t_21">Feld leeren</button>
          </div>
        </div>

        <div class="sep"></div>

        <div class="task">
          <div class="tasktitle">
            <div><b>2.2</b> Schaltbild lesen</div>
            <span class="pill">Verstehen</span>
          </div>
          <div style="color:var(--muted); margin-bottom:8px">
            Das Bild zeigt, wie man eine reale Schaltung als Schaltbild darstellt (mit Pluspol, Bauteilen und GND/Masse). 
            <br/>
            Schreibe in eigenen Worten: <b>Welche Informationen</b> liefert ein Schaltbild, und <b>warum</b> ist es praktisch?
          </div>
          <textarea id="t_22" placeholder="Antwort zu 2.2"></textarea>
          <div class="btnrow">
            <button data-copy="t_22">Text kopieren</button>
            <button data-clear="t_22">Feld leeren</button>
          </div>
        </div>

        <div class="sep"></div>

        <div class="task">
          <div class="tasktitle">
            <div><b>2.3</b> Widerstands-Farbcodes</div>
            <span class="pill">Knobelteil</span>
          </div>
          <div style="color:var(--muted); margin-bottom:8px">
            Auf Seite 5 wird auf Farbringe von Widerständen Bezug genommen (Codierung von Zahlenwerten).
            <br/>Notiere:
            <ol style="margin:6px 0 0; padding-left:18px">
              <li>Wie würdest du einer anderen Person erklären, was die Farbringe grundsätzlich bedeuten?</li>
              <li>Welche Informationen fehlen dir noch, um jeden Widerstand sicher zu bestimmen?</li>
            </ol>
          </div>
          <textarea id="t_23" placeholder="Antwort zu 2.3"></textarea>
          <div class="btnrow">
            <button data-copy="t_23">Text kopieren</button>
            <button data-clear="t_23">Feld leeren</button>
          </div>
        </div>

        <div class="sep"></div>

        <div class="callout">
          <strong>Merksatz: Reihe vs. Parallel</strong>
          <div style="color:var(--muted)">
            Bei der <b>Reihenschaltung</b> fließt der Strom nacheinander durch mehrere Bauteile; bei der <b>Parallelschaltung</b> gibt es mehrere Strompfade.
          </div>
        </div>

        <div class="sep"></div>

        <div class="task">
          <div class="tasktitle">
            <div><b>Reflexion:</b> Wo würdest du Reihe/Parallel im Alltag vermuten?</div>
            <span class="pill">Text wird gespeichert</span>
          </div>
          <textarea id="t_rp" placeholder="Beispiel(e) + kurze Begründung"></textarea>
          <div class="btnrow">
            <button data-copy="t_rp">Text kopieren</button>
            <button data-clear="t_rp">Feld leeren</button>
          </div>
          <div class="small">
            Wenn ihr abgeben sollt: Nutze <span class="kbd">Text kopieren</span> und füge ihn in eure Abgabe (Moodle/Nextcloud-Formular) ein.
          </div>
        </div>
      </div>
    </section>

    <section class="card" id="abgabe">
  <div class="inner">
    <h3>Abgabe – Sammel-Checkliste</h3>

   

    <div class="sep"></div>

    <div class="task">
      <b>Checkliste</b>
      <ul style="margin:8px 0; padding-left:18px">
        <li>☐ Erwartung an Arduino (Check-in)</li>
        <li>☐ Aufgabe 1 – Mikrocontroller im Alltag</li>
        <li>☐ Aufgabe 2 – LED & Widerstand</li>
        <li>☐ Aufgabe 2.1 – Aufbau & Beobachtung</li>
        <li>☐ Aufgabe 2.2 – Schaltbild</li>
        <li>☐ Aufgabe 2.3 – Widerstandsfarben</li>
        <li>☐ Reflexion Reihe/Parallel</li>
      </ul>
    </div>

    <div class="sep"></div>

    <div class="task">
      <div class="tasktitle">
        <div><b>Gesamtabgabe (optional)</b></div>
        <span class="pill">lokal gespeichert</span>
      </div>
      <textarea id="t_abgabe"
        placeholder="Füge hier optional alle kopierten Texte gesammelt ein."></textarea>
      <div class="btnrow">
        <button data-copy="t_abgabe">Gesamten Text kopieren</button>
        <button class="primary" data-done="abgabe">Abgabe vorbereitet</button>
      </div>
    </div>
  </div>
</section>

    
  </main>
</div>

<script>
  // ---------- LocalStorage helpers ----------
  const LS_PREFIX = "arduino_lernbaustein_s1-5__";
  const $ = (sel) => document.querySelector(sel);

  function lsKey(id){ return LS_PREFIX + id; }

  function saveText(id, val){
    localStorage.setItem(lsKey(id), val);
  }
  function loadText(id){
    return localStorage.getItem(lsKey(id)) ?? "";
  }
  function setDone(secId, done=true){
    localStorage.setItem(lsKey("done__"+secId), done ? "1" : "0");
    refreshDoneUI();
  }
  function isDone(secId){
    return (localStorage.getItem(lsKey("done__"+secId)) ?? "0") === "1";
  }

  // Load all textareas
  document.querySelectorAll("textarea").forEach(t => {
    t.value = loadText(t.id);
    t.addEventListener("input", () => saveText(t.id, t.value));
  });

  // Buttons: copy / clear / done
  document.addEventListener("click", async (e) => {
    const btn = e.target.closest("button");
    if(!btn) return;

    const copyId = btn.getAttribute("data-copy");
    const clearId = btn.getAttribute("data-clear");
    const doneSec = btn.getAttribute("data-done");

    if(copyId){
      const val = loadText(copyId);
      try{
        await navigator.clipboard.writeText(val);
        btn.textContent = "Kopiert!";
        setTimeout(()=>btn.textContent="Text kopieren", 900);
      }catch{
        alert("Kopieren nicht möglich. Markiere den Text manuell und kopiere ihn.");
      }
    }
    if(clearId){
      if(confirm("Feld wirklich leeren?")){
        saveText(clearId, "");
        $("#"+clearId).value = "";
      }
    }
    if(doneSec){
      setDone(doneSec, true);
    }
  });

  // Nav done state + progress
  function refreshDoneUI(){
    const links = document.querySelectorAll("#navlist a[data-sec]");
    let doneCount = 0;

    links.forEach(a=>{
      const sec = a.getAttribute("data-sec");
      const dot = a.querySelector(".dot");
      if(isDone(sec)){
        a.classList.add("done");
        dot && dot.parentElement && dot.parentElement.classList?.add?.("done");
        doneCount++;
        a.classList.add("done");
      } else {
        a.classList.remove("done");
      }
    });

    const pct = Math.round((doneCount / links.length) * 100);
    $("#bar").style.width = pct + "%";
  }
  refreshDoneUI();

  // Save-state badge
  try{
    localStorage.setItem(lsKey("__ping"), "1");
    $("#saveState").textContent = "Lokale Speicherung: aktiv";
  }catch{
    $("#saveState").textContent = "Lokale Speicherung: nicht verfügbar";
  }
</script>
</body>
</html>
